webpackJsonp([1],{122:function(t,e){function a(t){throw new Error("Cannot find module '"+t+"'.")}a.keys=function(){return[]},a.resolve=a,t.exports=a,a.id=122},123:function(t,e,a){"use strict";var r=a(16),n=a(1),i=a(85),s=a(50),o=a(51),c=a(63),d=a(125),p=a(64),l=a(218),u=a(217);a.d(e,"a",(function(){return f}));var f=(function(){function t(t,e,a,r,n,i,s){this.appState=t,this.cardToolsService=e,this.crapetteService=a,this.settingsService=r,this.animationService=n,this.together=i,this.route=s,this.hub=!0}return t.prototype.ngOnInit=function(){var t=this.route.snapshot.params;t.seed&&t.player&&(this.together.init(t),this.hub=!1),this.animationService.init();var e=this.crapetteService.initPlayers();this.stacks=this.crapetteService.initStacks(e),this.crapetteService.dealStacks(this.stacks,e),this.appState.set("stacks",this.stacks),this.appState.set("players",e);var a=this.stacks.player0Crapette.top,r=this.stacks.player1Crapette.top,n=r.value>a.value?1:0;this.appState.set("currentPlayer",e[n])},t.prototype.pick=function(t){this.crapetteService.pick(t.stack)},t.prototype.push=function(t){var e=this.appState.get("currentPlayer"),a=this.crapetteService.countAceOpportunity(e),r=t.stack,n=this.crapetteService.pickedStack;this.crapetteService.push(r);var i=this.crapetteService.countAceOpportunity(e);this.checkCrapette(a,i),this.checkVictory(e),this.checkEndTurn(r,n)},t.prototype.crapette=function(t){this.appState.get("players")[(t+1)%2]===this.appState.get("currentPlayer")&&this.crapetteService.crapetteAvailable&&(console.log("CRAPETTE"),this.crapetteService.endTurn())},t.prototype.changePlayer=function(){this.crapetteService.endTurn()},t.prototype.startLocalGame=function(){this.hub=!1},t.prototype.checkCrapette=function(t,e){if(t.length>0&&e.length===t.length){for(var a=!0,r=0;r<t.length;r++){if(t[r]!==e[r]){a=!1;break}}this.crapetteService.crapetteAvailable=a}else this.crapetteService.crapetteAvailable=!1},t.prototype.checkVictory=function(t){var e=this.stacks["player"+t.id+"Crapette"],a=this.stacks["player"+t.id+"Main"],r=this.stacks["player"+t.id+"Discard"];e.isEmpty()&&a.isEmpty()&&r.isEmpty()&&console.log("Player",t.id,"wins")},t.prototype.checkEndTurn=function(t,e){t.type===o.a.DISCARD&&t!==e&&t.owner&&t.owner.id===this.appState.get("currentPlayer").id&&this.crapetteService.endTurn()},t})();f=r.a([a.i(n._11)({selector:"game",encapsulation:n.m.None,template:a(399),styles:[a(442)],providers:[c.a,d.a,p.a,l.a,u.a]}),r.b("design:paramtypes",[s.a,c.a,d.a,p.a,u.a,l.a,i.c])],f)},124:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var r=(function(){function t(t){this.cards=[],t&&(e=this.cards).push.apply(e,t);var e}return t.prototype.addCard=function(t){this.cards.push(t)},t.prototype.pop=function(){return this.cards.pop()},Object.defineProperty(t.prototype,"last",{get:function(){return this.cards[this.cards.length-1]},enumerable:!0,configurable:!0}),t})()},125:function(t,e,a){"use strict";var r=a(16),n=a(1),i=a(86),s=a(124),o=a(51),c=a(215),d=a(63),p=a(64),l=a(87),u=a(216),f=a(50),h=a(44);a.d(e,"a",(function(){return g}));var g=(function(){function t(t,e,a,r){this.cardToolsService=t,this.appState=e,this.settings=a,this.broadcaster=r,this.NUMBEROFSTREETS=4,this.CRAPETTEHIGH=13,this.crapetteAvailable=!1}return t.prototype.initPlayers=function(){return[this.initPlayer(0),this.initPlayer(1)]},t.prototype.initStacks=function(t){for(var e={player0Main:new o.b(t[0].deck,!1,u.a,u.b,t[0],o.a.MAIN,!1,o.c.NONE),player0Discard:new o.b(new s.a,!1,u.c,u.d,t[0],o.a.DISCARD,!0,o.c.NONE),player0Crapette:new o.b(new s.a,!0,u.e,u.b,t[0],o.a.CRAPETTE,!0,o.c.NONE),player1Main:new o.b(t[1].deck,!1,u.a,u.b,t[1],o.a.MAIN,!1,o.c.NONE),player1Discard:new o.b(new s.a,!1,u.c,u.d,t[1],o.a.DISCARD,!0,o.c.NONE),player1Crapette:new o.b(new s.a,!0,u.e,u.b,t[1],o.a.CRAPETTE,!0,o.c.NONE),aces:[],streets:[]},a=0,r=t;a<r.length;a++){r[a];for(var n in i.a)if(i.a.hasOwnProperty(n)){i.a[n];e.aces.push(new o.b(new s.a,!0,u.f,u.g,null,o.a.ACE,!0,o.c.NONE))}}for(var c=0;c<this.NUMBEROFSTREETS*t.length;c++)e.streets.push(new o.b(new s.a,!0,u.h,u.i,null,o.a.STREET,!0,c<this.NUMBEROFSTREETS?o.c.LEFT:o.c.RIGHT));return e},t.prototype.dealStacks=function(t,e){for(var a=0,r=e;a<r.length;a++){for(var n=r[a],i=t["player"+n.id+"Main"],s=t["player"+n.id+"Crapette"],o=0;o<this.CRAPETTEHIGH;o++){var c=i.deck.pop();s.deck.addCard(c)}s.top.visible=!0;for(var d=0;d<this.NUMBEROFSTREETS;d++){var c=i.deck.pop();c.visible=!0,t.streets[n.id*this.NUMBEROFSTREETS+d].deck.addCard(c)}}},t.prototype.pick=function(t){this.pickedCard=t.top,this.pickedCard.picked=!0,this.pickedCard.visible=!0,this.pickedStack=t},t.prototype.push=function(t){this.pickedStack.deck.pop(),this.pickedCard.picked=!1,t.deck.addCard(this.pickedCard),this.pickedCard.rotation=2*Math.random()*h.c.cardRotationAmplitude-h.c.cardRotationAmplitude,this.pickedCard=null,this.pickedStack=null,this.broadcaster.broadcast("postCardPush",{stack:t})},t.prototype.endTurn=function(){var t=this.appState.get("currentPlayer"),e=this.appState.get("stacks")["player"+t.id+"Crapette"],a=e.top;a&&(a.visible=!0);var r=this.appState.get("players")[(t.id+1)%2];if(this.appState.set("currentPlayer",r),this.pickedCard&&this.pickedStack&&this.pickedStack.type===o.a.MAIN){var n=this.appState.get("stacks")["player"+t.id+"Discard"];this.push(n)}this.pickedStack&&(this.pickedStack=null),this.resetPickedCard(),this.crapetteAvailable=!1},t.prototype.resetPickedCard=function(){this.pickedCard&&(this.pickedCard.picked=!1,this.pickedCard=null)},t.prototype.refillMain=function(t){if(!this.pickedCard){var e=this.appState.get("stacks"),a=e["player"+t.id+"Main"],r=e["player"+t.id+"Discard"];a.deck.cards=r.deck.cards.reverse(),r.deck.cards=[],a.deck.cards.forEach((function(t){return t.visible=!1}))}},t.prototype.countAceOpportunity=function(t){var e=[],a=this.appState.get("stacks");e.push(a["player"+t.id+"Main"]),e.push(a["player"+t.id+"Crapette"]),e.push(a["player"+t.id+"Discard"]),e.push.apply(e,a.streets);for(var r=[],n=0,i=e;n<i.length;n++){var s=i[n],o=s.top;if(o&&o.visible&&s.popRule(s,o,this.appState,t))for(var c=0,d=a.aces;c<d.length;c++){var p=d[c];p.pushRule(p,o,this.appState,t,s)&&r.push(o)}}return r},Object.defineProperty(t.prototype,"rotate",{get:function(){return this.settings.rotateBoard&&0===this.appState.get("currentPlayer").id},enumerable:!0,configurable:!0}),t.prototype.initPlayer=function(t){var e=new c.a(t),a=this.cardToolsService.createSet(e);return e.deck.cards=a,this.cardToolsService.shuffleDeck(e.deck),e},t})();g=r.a([a.i(n.d)(),r.b("design:paramtypes",[d.a,f.a,p.a,l.a])],g)},186:function(t,e,a){"use strict";var r=a(209);a.d(e,"a",(function(){return r.a}))},19:function(t,e,a){t.exports=a.p+"e5b7d6461af957c30d0357de5d339183.png"},208:function(t,e,a){"use strict";var r=a(16),n=a(1),i=a(50),s=a(65);a.d(e,"a",(function(){return o}));var o=(function(){function t(t,e){this.appState=t,this.translate=e}return t.prototype.ngOnInit=function(){console.log("Initial App State",this.appState.state);var t="fr"===navigator.language?"fr":"en";this.translate.setDefaultLang(t)},t})();o=r.a([a.i(n._11)({selector:"app",encapsulation:n.m.None,template:a(397),styles:[a(440)]}),r.b("design:paramtypes",[i.a,s.c])],o)},209:function(t,e,a){"use strict";function r(t){return new S.a(t,"/crapette/assets/i18n/",".json")}var n=a(16),i=a(45),s=a(207),o=a(62),c=a(1),d=a(121),p=(a.n(d),a(44)),l=a(208),u=a(50),f=a(379),h=(a.n(f),a(211)),g=a(214),k=a(213),v=a(123),b=a(212),m=a(210),y=a(225),x=a(382),w=a(65),S=a(223),C=a(87);a.d(e,"a",(function(){return E}));var M=[u.a],E=(function(){function t(t,e){this.appRef=t,this.appState=e}return t.prototype.hmrOnInit=function(t){if(t&&t.state){if(console.log("HMR store",JSON.stringify(t,null,2)),this.appState._state=t.state,"restoreInputValues"in t){var e=t.restoreInputValues;setTimeout(e)}this.appRef.tick(),delete t.state,delete t.restoreInputValues}},t.prototype.hmrOnDestroy=function(t){var e=this.appRef.components.map((function(t){return t.location.nativeElement})),r=this.appState._state;t.state=r,t.disposeOldHosts=a.i(d.createNewHosts)(e),t.restoreInputValues=a.i(d.createInputTransfer)(),a.i(d.removeNgStyles)()},t.prototype.hmrAfterDestroy=function(t){t.disposeOldHosts(),delete t.disposeOldHosts},t})();E=n.a([a.i(c.x)({bootstrap:[l.a],declarations:[l.a,h.a,g.a,k.a,v.a,b.a],imports:[i.b,s.a,o.a,y.a.forRoot(),x.a.forRoot(),w.a.forRoot({loader:{provide:w.b,useFactory:r,deps:[o.b]}}),m.a],providers:[p.b,M,m.b,C.a]}),n.b("design:paramtypes",[c.h,u.a])],E)},210:function(t,e,a){"use strict";var r=a(85),n=a(123);a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return o}));var i=[{path:"",component:n.a},{path:":player/:seed",component:n.a}],s=[],o=r.a.forRoot(i)},211:function(t,e,a){"use strict";var r=a(16),n=a(1),i=a(86),s=a(63);a.d(e,"a",(function(){return o}));var o=(function(){function t(t){this.cardToolsService=t}return t})();r.a([a.i(n.M)(),r.b("design:type",i.b)],o.prototype,"card",void 0),o=r.a([a.i(n._11)({selector:"card",template:a(398),styles:[a(441),a(447)],encapsulation:n.m.None}),r.b("design:paramtypes",[s.a])],o)},212:function(t,e,a){"use strict";var r=a(16),n=a(1),i=a(85),s=a(65),o=a(44);a.d(e,"a",(function(){return c}));var c=(function(){function t(t,e){this.router=t,this.translate=e,this.showMulti=!1,this.baseUrl=o.c.baseUrl,this.enableOnline=o.c.enableOnline,this.local=new n.D}return t.prototype.startLocal=function(){this.local.next()},t.prototype.startOnline=function(){var t=Math.floor(1e5*Math.random());this.showMulti=!0,this.hash=t},t})();r.a([a.i(n._3)(),r.b("design:type",Object)],c.prototype,"local",void 0),c=r.a([a.i(n._11)({selector:"hub",template:a(400),styles:[a(443)],encapsulation:n.m.None}),r.b("design:paramtypes",[i.b,s.c])],c)},213:function(t,e,a){"use strict";var r=a(16),n=a(1),i=a(65),s=a(64);a.d(e,"a",(function(){return o}));var o=(function(){function t(t,e){this.settings=t,this.translate=e,this.state="settings"}return t.prototype.openMenu=function(){this.out=!0},t.prototype.closeMenu=function(){this.out=!1},t.prototype.clickButton=function(t){if(this.out&&t===this.state)return void this.closeMenu();this.state=t,this.openMenu()},t.prototype.changeLocale=function(t){this.translate.use(t)},t})();o=r.a([a.i(n._11)({selector:"menu",template:a(401),styles:[a(444),a(446)],encapsulation:n.m.None}),r.b("design:paramtypes",[s.a,i.c])],o)},214:function(t,e,a){"use strict";var r=a(16),n=a(1),i=a(51),s=a(125),o=a(50),c=a(64);a.d(e,"a",(function(){return d}));var d=(function(){function t(t,e,a){this.crapette=t,this.appState=e,this.settings=a,this.pick=new n.D,this.push=new n.D,this.stackTypes=i.a}return t.prototype.clickCard=function(t){var e=this.appState.get("currentPlayer");this.crapette.pickedCard&&(this.stack.pushRule(this.stack,this.crapette.pickedCard,this.appState,e,this.crapette.pickedStack)||this.stack.cancelable&&this.stack===this.crapette.pickedStack)?this.push.next(this):!this.crapette.pickedCard&&t?this.pickCard(t):t||this.stack.type!==i.a.MAIN||this.stack.owner!==e||this.crapette.refillMain(e)},t.prototype.computeShift=function(t,e,a){var r=3*(4-a);return e.spread&&(r=20*e.spread*a),r+"px"},t.prototype.handleDrop=function(t){if(t.dragData===this.crapette.pickedCard){var e=this.appState.get("currentPlayer");this.crapette.pickedCard&&(this.stack.pushRule(this.stack,this.crapette.pickedCard,this.appState,e,this.crapette.pickedStack)||this.stack.cancelable&&this.stack===this.crapette.pickedStack)&&this.push.next(this)}},t.prototype.handleDrag=function(t){this.pickCard(t)},t.prototype.pickCard=function(t){this.stack.popRule(this.stack,t,this.appState,this.appState.get("currentPlayer"),this.crapette.pickedStack)&&(this.crapette.resetPickedCard(),this.pick.next(this))},t})();r.a([a.i(n.M)(),r.b("design:type",i.b)],d.prototype,"stack",void 0),r.a([a.i(n._3)(),r.b("design:type",Object)],d.prototype,"pick",void 0),r.a([a.i(n._3)(),r.b("design:type",Object)],d.prototype,"push",void 0),d=r.a([a.i(n._11)({selector:"stack",template:a(402),styles:[a(445)],encapsulation:n.m.None}),r.b("design:paramtypes",[s.a,o.a,c.a])],d)},215:function(t,e,a){"use strict";var r=a(124);a.d(e,"a",(function(){return n}));var n=(function(){function t(t){this.id=t,this.deck=new r.a}return t})()},216:function(t,e,a){"use strict";var r=a(51);a.d(e,"i",(function(){return u})),a.d(e,"g",(function(){return f})),a.d(e,"b",(function(){return h})),a.d(e,"d",(function(){return g})),a.d(e,"a",(function(){return k})),a.d(e,"c",(function(){return v})),a.d(e,"e",(function(){return b})),a.d(e,"f",(function(){return m})),a.d(e,"h",(function(){return y}));var n=function(t,e){return e.type.color!==t.top.type.color},i=function(t,e){return e.type.name===t.top.type.name},s=function(t,e){return t.owner.id===e.id},o=function(t,e){return e===t.top},c=function(t,e){return 1===Math.abs(e.value-t.top.value)},d=function(t,e){return e.value-t.top.value==1},p=function(t,e){return e.value-t.top.value==-1},l=function(t){return 13!==t.top.value},u=function(t,e,a,r,n){return o(t,e)},f=function(t,e,a,r,n){return!1},h=function(t,e,a,r,n){return o(t,e)&&s(t,r)},g=function(t,e,a,r,n){return o(t,e)&&s(t,r)&&0===a.get("stacks")["player"+r.id+"Crapette"].deck.cards.length},k=function(t,e,a,r,n){return!1},v=function(t,e,a,i,o){return!(!s(t,i)||o.type!==r.a.MAIN)||!s(t,i)&&(0!==t.deck.cards.length&&(l(t)&&n(t,e)&&c(t,e)))},b=function(t,e,a,r,n){return 0!==t.deck.cards.length&&!s(t,r)&&l(t)&&i(t,e)&&c(t,e)},m=function(t,e,a,r,n){return 0===t.deck.cards.length?1===e.value:d(t,e)&&i(t,e)},y=function(t,e,a,r,i){return 0===t.deck.cards.length||n(t,e)&&p(t,e)}},217:function(t,e,a){"use strict";var r=a(16),n=a(1),i=a(87),s=a(63),o=a(51),c=a(44);a.d(e,"a",(function(){return d}));var d=(function(){function t(t,e){this.broadcaster=t,this.cardTools=e}return t.prototype.init=function(){var t=this;this.broadcaster.on("postCardPush").subscribe((function(e){return t.onPostCardPush(e)}))},t.prototype.onPostCardPush=function(t){var e=t.stack;e.type===o.a.ACE&&e.deck.cards.length===this.cardTools.CARDMAXHIGH&&this.aceStackAnimation(e,e.deck.cards.length-1)},t.prototype.aceStackAnimation=function(t,e){var a=this,r=this;setTimeout((function(){if(e>=a.cardTools.CARDMAXHIGH-6)t.deck.cards[e].rotation=0,r.aceStackAnimation(t,e-1);else for(var n=0,i=t.deck.cards;n<i.length;n++){var s=i[n];s.visible=!1}}),c.c.animations.fast)},t})();d=r.a([a.i(n.d)(),r.b("design:paramtypes",[i.a,s.a])],d)},218:function(t,e,a){"use strict";var r=a(16),n=a(1);a.d(e,"a",(function(){return i}));var i=(function(){function t(){}return t.prototype.init=function(t){console.log(t)},t})();i=r.a([a.i(n.d)()],i)},219:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var r={rotateBoard:!1,stackLength:!0,cardRotationAmplitude:5,baseUrl:"http://localhost:3000",enableOnline:!1,animations:{fast:80}}},220:function(t,e,a){"use strict";function r(){return a.i(n.a)().bootstrapModule(o.a).then(i.a).catch((function(t){return console.error(t)}))}Object.defineProperty(e,"__esModule",{value:!0});var n=a(185),i=a(44),s=a(121),o=(a.n(s),a(186));e.main=r,a.i(s.bootloader)(r)},371:function(t,e,a){e=t.exports=a(34)(),e.push([t.i,".row{display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row}.player-row{max-width:1100px;margin:0 auto}.field{flex:2}.alert-field,.side-field,.streets-field{flex:1}.streets-field{display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column}.streets-field .street{flex:1}.streets-left{margin-right:-16px}.streets-left .stack{text-align:right}.streets-left .stack *{text-align:left}.mid-row .stack{padding:5px 10px}.aces-field{width:280px;flex:unset;display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center;-webkit-flex-flow:row wrap;flex-flow:row wrap;-webkit-align-content:flex-end;align-content:flex-end}.board{transition:transform .3s}.board.rotate{-ms-transform:rotate(180deg);-webkit-transform:rotate(180deg);transform:rotate(180deg)}.board.rotate .player-row stack{display:block}.board.rotate button,.board.rotate stack{-ms-transform:rotate(180deg);-webkit-transform:rotate(180deg);transform:rotate(180deg)}.board.rotate .streets-left{margin-right:0}.board.rotate .streets-right{margin-left:-16px}.board.rotate .streets-left,.board.rotate .streets-right{margin-top:5px}.board.rotate .street{margin-top:4px}",""])},372:function(t,e,a){e=t.exports=a(34)(),e.push([t.i,".card{border:1px solid #d8d8d8;border-radius:5px;display:inline-block;width:110px;height:156px;color:#000;font-size:.9em;font-weight:600;background:#fefefe;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:transform .2s;transition:-webkit-transform .2s;transition:-ms-transform .2s}.card .card-content{margin:3px;border-radius:5px;height:calc(100% - 2 * 3px)}.card .invisible{background-color:#6363c3}.card .red.invisible{background-color:#e73d3d}.card .red-card{color:red}.card .bottom-right,.card .top-left{position:absolute}.card .top-left{top:7.5px;left:7.5px}.card .bottom-right{-ms-transform:rotate(180deg);-webkit-transform:rotate(180deg);transform:rotate(180deg);bottom:10.5px;right:7.5px}.card .card-suit{margin:2px 0 2px -2px}.card .card-value{padding-left:0}.card .icon-hearts15{margin-top:4px}.card .symbols-container{position:relative}.card .card-suit-big{position:absolute}.card .row-1{top:8px}.card .row-2{top:23px}.card .row-3{top:35px}.card .row-4{top:58px}.card .row-5{top:80px}.card .row-6{top:98px}.card .row-7{top:117px}.card .col-1{left:19px}.card .col-2{left:42px}.card .col-3{right:19px}.card .row-5,.card .row-6,.card .row-7{-ms-transform:rotate(180deg);-webkit-transform:rotate(180deg);transform:rotate(180deg)}.card .card-suit-ace{top:56px;left:37px}.card .card-value-10{margin-left:-3px}.card.picked{box-shadow:0 0 8px rgba(0,0,0,.4)}",""])},373:function(t,e,a){e=t.exports=a(34)(),e.push([t.i,"#game{transition:filter .4s,opacity .4s;overflow-x:hidden}#game .row{display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row}#game .player-row{max-width:1100px;margin:0 auto}#game .field{flex:2}#game .alert-field,#game .side-field,#game .streets-field{flex:1}#game .streets-field{display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column}#game .streets-field .street{flex:1}#game .streets-left{margin-right:-16px}#game .streets-left .stack{text-align:right}#game .streets-left .stack *{text-align:left}#game .mid-row .stack{padding:5px 10px}#game .aces-field{width:280px;flex:unset;display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center;-webkit-flex-flow:row wrap;flex-flow:row wrap;-webkit-align-content:flex-end;align-content:flex-end}#game button{margin-top:42px}#game .board{transition:transform .3s}#game .board.rotate{-ms-transform:rotate(180deg);-webkit-transform:rotate(180deg);transform:rotate(180deg)}#game .board.rotate .player-row stack{display:block}#game .board.rotate button,#game .board.rotate stack{-ms-transform:rotate(180deg);-webkit-transform:rotate(180deg);transform:rotate(180deg)}#game .board.rotate .streets-left{margin-right:0}#game .board.rotate .streets-right{margin-left:-16px}#game .board.rotate .streets-left,#game .board.rotate .streets-right{margin-top:5px}#game .board.rotate .street{margin-top:4px}#game .board.rotate .street .card-suit-ace{-ms-transform:rotate(180deg) scale(1.3);-webkit-transform:rotate(180deg) scale(1.3);transform:rotate(180deg) scale(1.3)}#game .board.rotate button{margin-top:100px}#game.blurry{-webkit-filter:blur(3px) grayscale(40%);filter:blur(3px) grayscale(40%);opacity:.5}#game .player-status{position:fixed;top:160px;left:-5px;text-align:right;width:85px;font-size:1.2em;height:43px;border:0;border-radius:5px;background-color:#6363c3;padding:7px;transition:background-color .2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#game .player-status span{text-transform:capitalize;color:#ff0;text-shadow:2px 2px 2px #f90}#game .player-status.red{background-color:#e73d3d}",""])},374:function(t,e,a){e=t.exports=a(34)(),e.push([t.i,"hub{position:fixed;z-index:20;width:30vw;height:200px;top:calc(50vh - 200px / 2);left:35vw;text-align:center}hub button{margin-bottom:15px}",""])},375:function(t,e,a){e=t.exports=a(34)(),e.push([t.i,"#menu{position:fixed;top:-10vh;padding-top:10vh;right:-920px;width:920px;min-width:460px;z-index:30;background-color:#fff;background-image:url("+a(380)+");transition:right .2s,transform .2s;height:120vh}#menu.out{right:calc(-460px + .07 * 100vh);-ms-transform:rotate(-2.5deg);-webkit-transform:rotate(-2.5deg);transform:rotate(-2.5deg)}#menu .section{width:460px;padding:25px 25px 0 50px;overflow-y:auto;height:calc(100vh - 2 * 25px)}#menu .section ul{padding:0 16px}#menu .section.rules{text-align:justify}#menu .icon-flag{margin-right:15px}.tab{display:block;width:100px;height:50px;position:fixed;top:160px;right:-40px;border:0;border-radius:5px;transition:right .2s;cursor:pointer;z-index:31}.tab.state-under{z-index:29}.tab.settings{background-color:#e73d3d;top:225px}.tab.rules{background-color:#6363c3}.tab.out{right:505px;-ms-transform:rotate(-2.5deg);-webkit-transform:rotate(-2.5deg);transform:rotate(-2.5deg)}.tab .icon-cog,.tab .icon-rules{margin-left:19px;margin-top:11px}",""])},376:function(t,e,a){e=t.exports=a(34)(),e.push([t.i,".stack{cursor:default!important;padding:10px}.stack.centered{text-align:center}.stack .horizontal-wrap{-ms-transform:rotate(90deg);-webkit-transform:rotate(90deg);transform:rotate(90deg);height:110px;width:156px}.stack .stack-wrap{position:relative;width:110px;height:156px;display:inline-flex}.stack card{position:absolute;top:0;left:0}.no-card{border:1px dashed #a2a2a2;display:inline-block;width:110px;height:156px;background:hsla(0,0%,100%,.3);border-radius:5px}.no-card.no-spread{margin-left:10px}.no-card .placeholder{width:110px;height:156px;position:absolute;top:0;left:0}.no-card .placeholder-rotate{-ms-transform:rotate(-90deg);-webkit-transform:rotate(-90deg);transform:rotate(-90deg);width:156px;height:110px;position:absolute;top:24px;left:-12px}.no-card .placeholder-main{color:#a2a2a2;font-weight:600;font-size:.7em;position:relative;top:90px}",""])},377:function(t,e,a){e=t.exports=a(34)(),e.push([t.i,".icon-cog{background-position:0 0;background-repeat:no-repeat;overflow:hidden;display:inline-block;width:26px;height:26px;background-image:url("+a(77)+")}.icon-flag-fr{background-position:0 -26px;background-image:url("+a(77)+")}.icon-flag-fr,.icon-flag-uk{background-repeat:no-repeat;overflow:hidden;display:inline-block;width:45px;height:30px}.icon-flag-uk{background-position:0 -56px;background-image:url("+a(77)+")}.icon-rules{background-position:0 -86px;background-repeat:no-repeat;overflow:hidden;display:inline-block;width:26px;height:30px;background-image:url("+a(77)+")}",""])},378:function(t,e,a){e=t.exports=a(34)(),e.push([t.i,".icon-heartsS{background-position:0 0;height:11px;background-image:url("+a(19)+")}.icon-clubsS,.icon-heartsS{background-repeat:no-repeat;overflow:hidden;display:inline-block;width:12px}.icon-clubsS{background-position:0 -11px;height:12px;background-image:url("+a(19)+")}.icon-spadesS{background-position:0 -23px;background-image:url("+a(19)+")}.icon-diamondsS,.icon-spadesS{background-repeat:no-repeat;overflow:hidden;display:inline-block;width:12px;height:14px}.icon-diamondsS{background-position:0 -37px;background-image:url("+a(19)+")}.icon-heartsM{background-position:0 -51px;height:19px;background-image:url("+a(19)+")}.icon-clubsM,.icon-heartsM{background-repeat:no-repeat;overflow:hidden;display:inline-block;width:20px}.icon-clubsM{background-position:0 -70px;height:21px;background-image:url("+a(19)+")}.icon-spadesM{background-position:0 -91px;height:23px;background-image:url("+a(19)+")}.icon-diamondsM,.icon-spadesM{background-repeat:no-repeat;overflow:hidden;display:inline-block;width:20px}.icon-diamondsM{background-position:0 -114px;height:24px;background-image:url("+a(19)+")}.icon-heartsL{background-position:0 -138px;height:30px;background-image:url("+a(19)+")}.icon-clubsL,.icon-heartsL{background-repeat:no-repeat;overflow:hidden;display:inline-block;width:32px}.icon-clubsL{background-position:0 -168px;height:33px;background-image:url("+a(19)+")}.icon-spadesL{background-position:0 -201px;height:37px;background-image:url("+a(19)+")}.icon-diamondsL,.icon-spadesL{background-repeat:no-repeat;overflow:hidden;display:inline-block;width:32px}.icon-diamondsL{background-position:0 -238px;height:38px;background-image:url("+a(19)+")}",""])},379:function(t,e){},380:function(t,e,a){t.exports=a.p+"2fee7df223a532b4ee3b37142886ea1e.jpg"},397:function(t,e){t.exports="<div>\n  <router-outlet></router-outlet>\n</div>"},398:function(t,e){t.exports='<div class="card" [ngStyle]="{\n  \'-webkit-transform\': card.visible ? \'rotate(\'+card.rotation+\'deg)\' : \'unset\',\n  \'transform\': card.visible ? \'rotate(\'+card.rotation+\'deg)\' : \'unset\'\n}" [ngClass]="{\n  \'picked\': card.picked\n}">\n  <div class="card-content" [ngClass]="{\n    \'red\':card.player.id === 1,\n    \'invisible\':!card.visible,\n    \'red-card\': card.type.color === 1\n  }">\n    <div class="top-left" *ngIf="card.visible">\n      <div class="card-value {{\'card-value-\'+cardToolsService.getCharFromNumeric(card.value)}}">{{cardToolsService.getCharFromNumeric(card.value)}}</div>\n      <div class="card-suit" [ngClass]="\'icon-\'+card.type.name+\'S\'"></div>\n    </div>\n\n    <div class="bottom-right" *ngIf="card.visible">\n      <div class="card-value {{\'card-value-\'+cardToolsService.getCharFromNumeric(card.value)}}">{{cardToolsService.getCharFromNumeric(card.value)}}</div>\n      <div class="card-suit" [ngClass]="\'icon-\'+card.type.name+\'S\'"></div>\n    </div>\n\n    <div class="symbols-container" *ngIf="card.visible">\n      <div class="card-suit-big row-1 col-1" [ngClass]="\'icon-\'+card.type.name+\'M\'" *ngIf="[4,5,6,7,8,9,10].includes(card.value)"></div>\n      <div class="card-suit-big row-1 col-2" [ngClass]="\'icon-\'+card.type.name+\'M\'" *ngIf="[2, 3].includes(card.value)"></div>\n      <div class="card-suit-big row-1 col-3" [ngClass]="\'icon-\'+card.type.name+\'M\'" *ngIf="[4,5,6,7,8,9,10].includes(card.value)"></div>\n\n      <div class="card-suit-big row-2 col-2" [ngClass]="\'icon-\'+card.type.name+\'M\'" *ngIf="[10].includes(card.value)"></div>\n\n      <div class="card-suit-big row-3 col-1" [ngClass]="\'icon-\'+card.type.name+\'M\'" *ngIf="[9,10].includes(card.value)"></div>\n      <div class="card-suit-big row-3 col-2" [ngClass]="\'icon-\'+card.type.name+\'M\'" *ngIf="[7,8].includes(card.value)"></div>\n      <div class="card-suit-big row-3 col-3" [ngClass]="\'icon-\'+card.type.name+\'M\'" *ngIf="[9,10].includes(card.value)"></div>\n\n      <div class="card-suit-big row-4 col-1" [ngClass]="\'icon-\'+card.type.name+\'M\'" *ngIf="[6,7,8].includes(card.value)"></div>\n      <div class="card-suit-big row-4 col-2" [ngClass]="\'icon-\'+card.type.name+\'M\'" *ngIf="[3,9,5].includes(card.value)"></div>\n      <div class="card-suit-big row-4 col-3" [ngClass]="\'icon-\'+card.type.name+\'M\'" *ngIf="[6,7,8].includes(card.value)"></div>\n\n      <div class="card-suit-big row-5 col-1" [ngClass]="\'icon-\'+card.type.name+\'M\'" *ngIf="[9,10].includes(card.value)"></div>\n      <div class="card-suit-big row-5 col-3" [ngClass]="\'icon-\'+card.type.name+\'M\'" *ngIf="[9,10].includes(card.value)"></div>\n      \n      <div class="card-suit-big row-6 col-2" [ngClass]="\'icon-\'+card.type.name+\'M\'" *ngIf="[10,8].includes(card.value)"></div>\n\n      <div class="card-suit-big row-7 col-1" [ngClass]="\'icon-\'+card.type.name+\'M\'" *ngIf="[4,5,6,7,8,9,10].includes(card.value)"></div>\n      <div class="card-suit-big row-7 col-2" [ngClass]="\'icon-\'+card.type.name+\'M\'" *ngIf="[2, 3].includes(card.value)"></div>\n      <div class="card-suit-big row-7 col-3" [ngClass]="\'icon-\'+card.type.name+\'M\'" *ngIf="[4,5,6,7,8,9,10].includes(card.value)"></div>\n\n      <div class="card-suit-big card-suit-ace row-4 col-2" [ngClass]="\'icon-\'+card.type.name+\'L\'" *ngIf="[1].includes(card.value)"></div>\n    </div>\n  </div>\n</div>'},399:function(t,e){t.exports='<hub *ngIf="hub" (local)="startLocalGame()"></hub>\n<div id="game" [ngClass]="{\'blurry\': hub}">\n  <div id="hacks" style="position:fixed; top:0; left: 0;">\n  </div>\n  <div class="player-status" [ngClass]="{\'red\': appState.get(\'currentPlayer\').id}"><span>{{\'player\' | translate}}</span><br /><span>{{appState.get(\'currentPlayer\').id + 1}}</span></div>\n  <div class="board" [ngClass]="{\'rotate\': crapetteService.rotate}">\n    <div class="row player-row player-row-top">\n      <div class="field side-field"></div>\n      <div class="field crappette-field">\n        <stack (pick)="pick($event)" (push)="push($event)" [stack]="stacks.player0Crapette"></stack>\n      </div>\n      <div class="field main-field">\n        <stack (pick)="pick($event)" (push)="push($event)" [stack]="stacks.player0Main"></stack>\n      </div>\n      <div class="field discard-field">\n        <stack (pick)="pick($event)" (push)="push($event)" [stack]="stacks.player0Discard"></stack>\n      </div>\n      <div class="field alert-field">\n        <button (click)="crapette(0)">{{\'crapette\' | translate}}</button>\n      </div>\n    </div>\n\n    <div class="row mid-row">\n      <div class="field streets-field streets-left">\n        <div class="street" *ngFor="let street of stacks.streets | slice:0:crapetteService.NUMBEROFSTREETS;  let i=index">\n          <stack (pick)="pick($event)" (push)="push($event)" [stack]="street"></stack>\n        </div>\n      </div>\n\n      <div class="field aces-field">\n        <stack (pick)="pick($event)" (push)="push($event)" *ngFor="let pile of stacks.aces" [stack]="pile"></stack>\n      </div>\n\n      <div class="field streets-field streets-right">\n        <div class="street" *ngFor="let street of stacks.streets | slice:crapetteService.NUMBEROFSTREETS:crapetteService.NUMBEROFSTREETS*2;  let i=index">\n          <stack (pick)="pick($event)" (push)="push($event)" [stack]="street"></stack>\n        </div>\n      </div>\n\n    </div>\n\n    <div class="row player-row player-row-top">\n      <div class="field alert-field">\n        <button (click)="crapette(1)">{{\'crapette\' | translate}}</button>\n      </div>\n      <div class="field discard-field">\n        <stack (pick)="pick($event)" (push)="push($event)" [stack]="stacks.player1Discard"></stack>\n      </div>\n      <div class="field main-field">\n        <stack (pick)="pick($event)" (push)="push($event)" [stack]="stacks.player1Main"></stack>\n      </div>\n      <div class="field crappette-field">\n        <stack (pick)="pick($event)" (push)="push($event)" [stack]="stacks.player1Crapette"></stack>\n      </div>\n      <div class="field side-field"></div>\n    </div>\n  </div>\n  <menu></menu>\n</div>'},400:function(t,e){t.exports='<div id="hub">\n  <button class="large" (click)="startLocal()">{{ \'hub.local\' | translate}}</button><br>\n  <button class="large" *ngIf="enableOnline && !showMulti" (click)="startOnline()">{{ \'hub.online\' | translate}}</button>\n  <div *ngIf="enableOnline && showMulti">\n    <p><span>{{baseUrl + \'/p1/\' + hash}}</span> | <a target="_blank" href="{{baseUrl + \'/p1/\' + hash}}">{{ \'hub.go\' | translate}}</a></p>\n    <p><span>{{baseUrl + \'/p2/\' + hash}}</span> | <a target="_blank" href="{{baseUrl + \'/p2/\' + hash}}">{{ \'hub.go\' | translate}}</a></p>\n  </div>\n</div>'},401:function(t,e){t.exports="<div class=\"tab rules\" [ngClass]=\"{'out': out, 'state-under': state === 'settings'}\" (click)=\"clickButton('rules')\"><div class=\"icon-rules\"></div></div>\n<div class=\"tab settings\" [ngClass]=\"{'out': out, 'state-under': state === 'rules'}\" (click)=\"clickButton('settings')\"><div class=\"icon-cog\"></div></div>\n<div id=\"menu\" [ngClass]=\"{'out': out}\">\n\n  <div class=\"section rules\" *ngIf=\"out && state === 'rules'\">\n    <markdown>{{'rules.intro' | translate}}</markdown>\n    <markdown>{{'rules.layout' | translate}}</markdown>\n    <markdown>{{'rules.stacks' | translate}}</markdown>\n    <markdown>{{'rules.turn' | translate}}</markdown>\n    <markdown>{{'rules.steal' | translate}}</markdown>\n    <markdown>{{'rules.special' | translate}}</markdown>\n    <markdown>{{'rules.addendum' | translate}}</markdown>\n  </div>\n\n  <div class=\"section settings\" *ngIf=\"out && state === 'settings'\">\n    <markdown>{{'settings.intro' | translate}}</markdown>\n    <p><label><input type=\"checkbox\" [(ngModel)]=\"settings.rotateBoard\"> {{'settings.rotateBoard' | translate}}</label></p>\n    <p><label><input type=\"checkbox\" [(ngModel)]=\"settings.stackLength\"> {{'settings.stackHeight' | translate}}</label></p>\n    <p><span class=\"icon-flag icon-flag-uk\" (click)=\"changeLocale('en')\"></span> <span class=\"icon-flag icon-flag-fr\" (click)=\"changeLocale('fr')\"></span></p>\n  </div>\n</div>"},402:function(t,e){t.exports='<div class="stack" [ngClass]="{\'centered\': !stack.vertical || stack.type === stackTypes.CRAPETTE}"\n  dnd-droppable (onDropSuccess)="handleDrop($event)">\n  <div class="stack-wrap" [ngClass]="{\'horizontal-wrap\': !stack.vertical}">\n    <div *ngIf="stack.deck.cards.length === 0">\n      <div class="no-card" (click)="clickCard()" [ngClass]="{\'no-spread\': !stack.spread}">\n        <div class="placeholder" [ngClass]="{\'placeholder-rotate\': stack.type === stackTypes.MAIN}">\n          <span class="placeholder-main" *ngIf="stack.type === stackTypes.MAIN">Click to renew discard</span>\n        </div>\n      </div>\n    </div>\n    <div *ngIf="(stack.deck.cards.length > 0)">\n      <card title="{{settings.stackLength ? stack.deck.cards.length : \'\'}}" *ngFor="let card of stack.deck.cards | slice:stack.spread?0:-4; let i = index" [ngStyle]="{\'left\': computeShift(card, stack, i)}" [card]="card" (click)="clickCard(card)"\n      dnd-draggable [dragData]="card" (onDragStart)="handleDrag(card)"\n      [dragEnabled]="card === stack.top && (!crapette.pickedStack || crapette.pickedStack.cancelable || crapette.pickedStack === stack)"></card>\n    </div>\n  </div>\n</div>'},44:function(t,e,a){"use strict";var r=a(45),n=a(1),i=a(219);a.d(e,"a",(function(){return d})),a.d(e,"b",(function(){return p})),a.d(e,"c",(function(){return l}));var s=[],o={},c=function(t){return t};console.log("################"),console.log(a.i({ENV:"production",NODE_ENV:"production",HMR:!1,GITHUB:!1})),console.log("production"),console.log(a.i({ENV:"production",NODE_ENV:"production",HMR:!1,GITHUB:!1}).PRODENV),a.i(n.a)(),c=function(t){return a.i(r.a)(),t},s=s.slice();var d=c,p=s.slice(),l=Object.assign(i.a,o)},440:function(t,e,a){var r=a(371);t.exports="string"==typeof r?r:r.toString()},441:function(t,e,a){var r=a(372);t.exports="string"==typeof r?r:r.toString()},442:function(t,e,a){var r=a(373);t.exports="string"==typeof r?r:r.toString()},443:function(t,e,a){var r=a(374);t.exports="string"==typeof r?r:r.toString()},444:function(t,e,a){var r=a(375);t.exports="string"==typeof r?r:r.toString()},445:function(t,e,a){var r=a(376);t.exports="string"==typeof r?r:r.toString()},446:function(t,e,a){var r=a(377);t.exports="string"==typeof r?r:r.toString()},447:function(t,e,a){var r=a(378);t.exports="string"==typeof r?r:r.toString()},50:function(t,e,a){"use strict";var r=a(16),n=a(1);a.d(e,"a",(function(){return i}));var i=(function(){function t(){this._state={}}return Object.defineProperty(t.prototype,"state",{get:function(){return this._state=this._clone(this._state)},set:function(t){throw new Error("do not mutate the `.state` directly")},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=this._state;return e.hasOwnProperty(t)?e[t]:e},t.prototype.set=function(t,e){return this._state[t]=e},t.prototype._clone=function(t){return JSON.parse(JSON.stringify(t))},t})();i=r.a([a.i(n.d)()],i)},51:function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));var r={LEFT:-1,NONE:0,RIGHT:1},n={MAIN:0,CRAPETTE:1,DISCARD:2,ACE:3,STREET:4},i=(function(){function t(t,e,a,r,n,i,s,o){this.deck=t,this.vertical=e,this.spread=o,this.pushRule=a,this.popRule=r,this.owner=n,this.type=i,this.cancelable=s}return Object.defineProperty(t.prototype,"top",{get:function(){return this.deck.last},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.deck.cards.length},t})()},63:function(t,e,a){"use strict";var r=a(16),n=a(1),i=a(86);a.d(e,"a",(function(){return s}));var s=(function(){function t(){this.CARDMINHIGH=1,this.CARDMAXHIGH=13}return t.prototype.getCharFromNumeric=function(t){var e=""+t;switch(t){case 1:e="A";break;case 11:e="J";break;case 12:e="Q";break;case 13:e="K"}return e},t.prototype.getNumericFromChar=function(t){var e=parseInt(t,10);switch(t){case"A":e=1;break;case"J":e=11;break;case"Q":e=12;break;case"K":e=13}return e},t.prototype.shuffleDeck=function(t){t.cards=this.shuffle(t.cards)},t.prototype.createSet=function(t,e,a){var r=[];e=e||this.CARDMINHIGH,a=a||this.CARDMAXHIGH;for(var n in i.a)if(i.a.hasOwnProperty(n))for(var s=i.a[n],o=e;o<=a;o++)r.push(new i.b(t,s,o));return r},t.prototype.shuffle=function(t){for(var e,a,r=t.length;r;)a=Math.floor(Math.random()*r--),e=t[r],t[r]=t[a],t[a]=e;return t},t})();s=r.a([a.i(n.d)()],s)},64:function(t,e,a){"use strict";var r=a(16),n=a(1),i=a(44);a.d(e,"a",(function(){return s}));var s=(function(){function t(){}return Object.defineProperty(t.prototype,"rotateBoard",{get:function(){return i.c.rotateBoard},set:function(t){i.c.rotateBoard=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stackLength",{get:function(){return i.c.stackLength},set:function(t){i.c.stackLength=t},enumerable:!0,configurable:!0}),t})();s=r.a([a.i(n.d)()],s)},77:function(t,e,a){t.exports=a.p+"c3fde39bc58f9653b0d2a7566af14fe6.png"},86:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return n}));var r={CLUBS:{name:"clubs",color:0},HEARTS:{name:"hearts",color:1},DIAMONDS:{name:"diamonds",color:1},SPADES:{name:"spades",color:0}},n=(function(){function t(t,e,a){t&&(this.player=t),this.type=e,this.value=a,this.visible=!1,this.picked=!1,t.deck.addCard(this)}return t})()},87:function(t,e,a){"use strict";var r=a(49),n=(a.n(r),a(410)),i=(a.n(n),a(81));a.n(i);a.d(e,"a",(function(){return s}));var s=(function(){function t(){this._eventBus=new r.Subject}return t.prototype.broadcast=function(t,e){this._eventBus.next({key:t,data:e})},t.prototype.on=function(t){return this._eventBus.asObservable().filter((function(e){return e.key===t})).map((function(t){return t.data}))},t})()}},[220]);